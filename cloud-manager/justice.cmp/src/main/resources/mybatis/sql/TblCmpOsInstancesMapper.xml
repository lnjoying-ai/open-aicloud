<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lnjoying.justice.cmp.db.mapper.TblCmpOsInstancesMapper">
  <resultMap id="BaseResultMap" type="com.lnjoying.justice.cmp.db.model.TblCmpOsInstances">
    <id column="cloud_id" jdbcType="VARCHAR" property="cloudId" />
    <id column="uuid" jdbcType="VARCHAR" property="uuid" />
    <result column="created_at" jdbcType="TIMESTAMP" property="createdAt" />
    <result column="updated_at" jdbcType="TIMESTAMP" property="updatedAt" />
    <result column="deleted_at" jdbcType="TIMESTAMP" property="deletedAt" />
    <result column="id" jdbcType="INTEGER" property="id" />
    <result column="internal_id" jdbcType="INTEGER" property="internalId" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="project_id" jdbcType="VARCHAR" property="projectId" />
    <result column="image_ref" jdbcType="VARCHAR" property="imageRef" />
    <result column="kernel_id" jdbcType="VARCHAR" property="kernelId" />
    <result column="ramdisk_id" jdbcType="VARCHAR" property="ramdiskId" />
    <result column="launch_index" jdbcType="INTEGER" property="launchIndex" />
    <result column="key_name" jdbcType="VARCHAR" property="keyName" />
    <result column="key_data" jdbcType="VARCHAR" property="keyData" />
    <result column="power_state" jdbcType="INTEGER" property="powerState" />
    <result column="vm_state" jdbcType="VARCHAR" property="vmState" />
    <result column="memory_mb" jdbcType="INTEGER" property="memoryMb" />
    <result column="vcpus" jdbcType="INTEGER" property="vcpus" />
    <result column="hostname" jdbcType="VARCHAR" property="hostname" />
    <result column="host" jdbcType="VARCHAR" property="host" />
    <result column="user_data" jdbcType="VARCHAR" property="userData" />
    <result column="reservation_id" jdbcType="VARCHAR" property="reservationId" />
    <result column="launched_at" jdbcType="TIMESTAMP" property="launchedAt" />
    <result column="terminated_at" jdbcType="TIMESTAMP" property="terminatedAt" />
    <result column="display_name" jdbcType="VARCHAR" property="displayName" />
    <result column="display_description" jdbcType="VARCHAR" property="displayDescription" />
    <result column="availability_zone" jdbcType="VARCHAR" property="availabilityZone" />
    <result column="locked" jdbcType="SMALLINT" property="locked" />
    <result column="os_type" jdbcType="VARCHAR" property="osType" />
    <result column="launched_on" jdbcType="VARCHAR" property="launchedOn" />
    <result column="instance_type_id" jdbcType="VARCHAR" property="instanceTypeId" />
    <result column="vm_mode" jdbcType="VARCHAR" property="vmMode" />
    <result column="architecture" jdbcType="VARCHAR" property="architecture" />
    <result column="root_device_name" jdbcType="VARCHAR" property="rootDeviceName" />
    <result column="access_ip_v4" jdbcType="VARCHAR" property="accessIpV4" />
    <result column="access_ip_v6" jdbcType="VARCHAR" property="accessIpV6" />
    <result column="config_drive" jdbcType="VARCHAR" property="configDrive" />
    <result column="task_state" jdbcType="VARCHAR" property="taskState" />
    <result column="default_ephemeral_device" jdbcType="VARCHAR" property="defaultEphemeralDevice" />
    <result column="default_swap_device" jdbcType="VARCHAR" property="defaultSwapDevice" />
    <result column="progress" jdbcType="INTEGER" property="progress" />
    <result column="auto_disk_config" jdbcType="SMALLINT" property="autoDiskConfig" />
    <result column="shutdown_terminate" jdbcType="SMALLINT" property="shutdownTerminate" />
    <result column="disable_terminate" jdbcType="SMALLINT" property="disableTerminate" />
    <result column="root_gb" jdbcType="INTEGER" property="rootGb" />
    <result column="ephemeral_gb" jdbcType="INTEGER" property="ephemeralGb" />
    <result column="cell_name" jdbcType="VARCHAR" property="cellName" />
    <result column="node" jdbcType="VARCHAR" property="node" />
    <result column="deleted" jdbcType="INTEGER" property="deleted" />
    <result column="locked_by" jdbcType="VARCHAR" property="lockedBy" />
    <result column="cleand" jdbcType="INTEGER" property="cleand" />
    <result column="ephemeral_key_uuid" jdbcType="VARCHAR" property="ephemeralKeyUuid" />
    <result column="hidden" jdbcType="SMALLINT" property="hidden" />
    <result column="ee_status" jdbcType="INTEGER" property="eeStatus" />
    <result column="ee_bp" jdbcType="VARCHAR" property="eeBp" />
    <result column="ee_user" jdbcType="VARCHAR" property="eeUser" />
    <result column="status" jdbcType="VARCHAR" property="status" />
    <result column="network_info" jdbcType="VARCHAR" property="networkInfo" />
    <result column="charge_type" jdbcType="INTEGER" property="chargeType" />
    <result column="price_unit" jdbcType="INTEGER" property="priceUnit" />
    <result column="period" jdbcType="INTEGER" property="period" />
    <result column="expire_time" jdbcType="TIMESTAMP" property="expireTime" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    cloud_id, uuid, created_at, updated_at, deleted_at, id, internal_id, user_id, project_id, 
    image_ref, kernel_id, ramdisk_id, launch_index, key_name, key_data, power_state, 
    vm_state, memory_mb, vcpus, hostname, host, user_data, reservation_id, launched_at, 
    terminated_at, display_name, display_description, availability_zone, locked, os_type, 
    launched_on, instance_type_id, vm_mode, architecture, root_device_name, access_ip_v4, 
    access_ip_v6, config_drive, task_state, default_ephemeral_device, default_swap_device, 
    progress, auto_disk_config, shutdown_terminate, disable_terminate, root_gb, ephemeral_gb, 
    cell_name, node, deleted, locked_by, cleand, ephemeral_key_uuid, hidden, ee_status, 
    ee_bp, ee_user, status, network_info, charge_type, price_unit, period, expire_time
  </sql>
  <select id="selectByExample" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstancesExample" resultMap="BaseResultMap">
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from tbl_cmp_os_instances
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstancesKey" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from tbl_cmp_os_instances
    where cloud_id = #{cloudId,jdbcType=VARCHAR}
      and uuid = #{uuid,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstancesKey">
    delete from tbl_cmp_os_instances
    where cloud_id = #{cloudId,jdbcType=VARCHAR}
      and uuid = #{uuid,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstancesExample">
    delete from tbl_cmp_os_instances
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstances">
    insert into tbl_cmp_os_instances (cloud_id, uuid, created_at, 
      updated_at, deleted_at, id, 
      internal_id, user_id, project_id, 
      image_ref, kernel_id, ramdisk_id, 
      launch_index, key_name, key_data, 
      power_state, vm_state, memory_mb, 
      vcpus, hostname, host, 
      user_data, reservation_id, launched_at, 
      terminated_at, display_name, display_description, 
      availability_zone, locked, os_type, 
      launched_on, instance_type_id, vm_mode, 
      architecture, root_device_name, access_ip_v4, 
      access_ip_v6, config_drive, task_state, 
      default_ephemeral_device, default_swap_device, 
      progress, auto_disk_config, shutdown_terminate, 
      disable_terminate, root_gb, ephemeral_gb, 
      cell_name, node, deleted, 
      locked_by, cleand, ephemeral_key_uuid, 
      hidden, ee_status, ee_bp, 
      ee_user, status, network_info, 
      charge_type, price_unit, period, 
      expire_time)
    values (#{cloudId,jdbcType=VARCHAR}, #{uuid,jdbcType=VARCHAR}, #{createdAt,jdbcType=TIMESTAMP}, 
      #{updatedAt,jdbcType=TIMESTAMP}, #{deletedAt,jdbcType=TIMESTAMP}, #{id,jdbcType=INTEGER}, 
      #{internalId,jdbcType=INTEGER}, #{userId,jdbcType=VARCHAR}, #{projectId,jdbcType=VARCHAR}, 
      #{imageRef,jdbcType=VARCHAR}, #{kernelId,jdbcType=VARCHAR}, #{ramdiskId,jdbcType=VARCHAR}, 
      #{launchIndex,jdbcType=INTEGER}, #{keyName,jdbcType=VARCHAR}, #{keyData,jdbcType=VARCHAR}, 
      #{powerState,jdbcType=INTEGER}, #{vmState,jdbcType=VARCHAR}, #{memoryMb,jdbcType=INTEGER}, 
      #{vcpus,jdbcType=INTEGER}, #{hostname,jdbcType=VARCHAR}, #{host,jdbcType=VARCHAR}, 
      #{userData,jdbcType=VARCHAR}, #{reservationId,jdbcType=VARCHAR}, #{launchedAt,jdbcType=TIMESTAMP}, 
      #{terminatedAt,jdbcType=TIMESTAMP}, #{displayName,jdbcType=VARCHAR}, #{displayDescription,jdbcType=VARCHAR}, 
      #{availabilityZone,jdbcType=VARCHAR}, #{locked,jdbcType=SMALLINT}, #{osType,jdbcType=VARCHAR}, 
      #{launchedOn,jdbcType=VARCHAR}, #{instanceTypeId,jdbcType=VARCHAR}, #{vmMode,jdbcType=VARCHAR}, 
      #{architecture,jdbcType=VARCHAR}, #{rootDeviceName,jdbcType=VARCHAR}, #{accessIpV4,jdbcType=VARCHAR}, 
      #{accessIpV6,jdbcType=VARCHAR}, #{configDrive,jdbcType=VARCHAR}, #{taskState,jdbcType=VARCHAR}, 
      #{defaultEphemeralDevice,jdbcType=VARCHAR}, #{defaultSwapDevice,jdbcType=VARCHAR}, 
      #{progress,jdbcType=INTEGER}, #{autoDiskConfig,jdbcType=SMALLINT}, #{shutdownTerminate,jdbcType=SMALLINT}, 
      #{disableTerminate,jdbcType=SMALLINT}, #{rootGb,jdbcType=INTEGER}, #{ephemeralGb,jdbcType=INTEGER}, 
      #{cellName,jdbcType=VARCHAR}, #{node,jdbcType=VARCHAR}, #{deleted,jdbcType=INTEGER}, 
      #{lockedBy,jdbcType=VARCHAR}, #{cleand,jdbcType=INTEGER}, #{ephemeralKeyUuid,jdbcType=VARCHAR}, 
      #{hidden,jdbcType=SMALLINT}, #{eeStatus,jdbcType=INTEGER}, #{eeBp,jdbcType=VARCHAR}, 
      #{eeUser,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, #{networkInfo,jdbcType=VARCHAR}, 
      #{chargeType,jdbcType=INTEGER}, #{priceUnit,jdbcType=INTEGER}, #{period,jdbcType=INTEGER}, 
      #{expireTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstances">
    insert into tbl_cmp_os_instances
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="cloudId != null">
        cloud_id,
      </if>
      <if test="uuid != null">
        uuid,
      </if>
      <if test="createdAt != null">
        created_at,
      </if>
      <if test="updatedAt != null">
        updated_at,
      </if>
      <if test="deletedAt != null">
        deleted_at,
      </if>
      <if test="id != null">
        id,
      </if>
      <if test="internalId != null">
        internal_id,
      </if>
      <if test="userId != null">
        user_id,
      </if>
      <if test="projectId != null">
        project_id,
      </if>
      <if test="imageRef != null">
        image_ref,
      </if>
      <if test="kernelId != null">
        kernel_id,
      </if>
      <if test="ramdiskId != null">
        ramdisk_id,
      </if>
      <if test="launchIndex != null">
        launch_index,
      </if>
      <if test="keyName != null">
        key_name,
      </if>
      <if test="keyData != null">
        key_data,
      </if>
      <if test="powerState != null">
        power_state,
      </if>
      <if test="vmState != null">
        vm_state,
      </if>
      <if test="memoryMb != null">
        memory_mb,
      </if>
      <if test="vcpus != null">
        vcpus,
      </if>
      <if test="hostname != null">
        hostname,
      </if>
      <if test="host != null">
        host,
      </if>
      <if test="userData != null">
        user_data,
      </if>
      <if test="reservationId != null">
        reservation_id,
      </if>
      <if test="launchedAt != null">
        launched_at,
      </if>
      <if test="terminatedAt != null">
        terminated_at,
      </if>
      <if test="displayName != null">
        display_name,
      </if>
      <if test="displayDescription != null">
        display_description,
      </if>
      <if test="availabilityZone != null">
        availability_zone,
      </if>
      <if test="locked != null">
        locked,
      </if>
      <if test="osType != null">
        os_type,
      </if>
      <if test="launchedOn != null">
        launched_on,
      </if>
      <if test="instanceTypeId != null">
        instance_type_id,
      </if>
      <if test="vmMode != null">
        vm_mode,
      </if>
      <if test="architecture != null">
        architecture,
      </if>
      <if test="rootDeviceName != null">
        root_device_name,
      </if>
      <if test="accessIpV4 != null">
        access_ip_v4,
      </if>
      <if test="accessIpV6 != null">
        access_ip_v6,
      </if>
      <if test="configDrive != null">
        config_drive,
      </if>
      <if test="taskState != null">
        task_state,
      </if>
      <if test="defaultEphemeralDevice != null">
        default_ephemeral_device,
      </if>
      <if test="defaultSwapDevice != null">
        default_swap_device,
      </if>
      <if test="progress != null">
        progress,
      </if>
      <if test="autoDiskConfig != null">
        auto_disk_config,
      </if>
      <if test="shutdownTerminate != null">
        shutdown_terminate,
      </if>
      <if test="disableTerminate != null">
        disable_terminate,
      </if>
      <if test="rootGb != null">
        root_gb,
      </if>
      <if test="ephemeralGb != null">
        ephemeral_gb,
      </if>
      <if test="cellName != null">
        cell_name,
      </if>
      <if test="node != null">
        node,
      </if>
      <if test="deleted != null">
        deleted,
      </if>
      <if test="lockedBy != null">
        locked_by,
      </if>
      <if test="cleand != null">
        cleand,
      </if>
      <if test="ephemeralKeyUuid != null">
        ephemeral_key_uuid,
      </if>
      <if test="hidden != null">
        hidden,
      </if>
      <if test="eeStatus != null">
        ee_status,
      </if>
      <if test="eeBp != null">
        ee_bp,
      </if>
      <if test="eeUser != null">
        ee_user,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="networkInfo != null">
        network_info,
      </if>
      <if test="chargeType != null">
        charge_type,
      </if>
      <if test="priceUnit != null">
        price_unit,
      </if>
      <if test="period != null">
        period,
      </if>
      <if test="expireTime != null">
        expire_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="cloudId != null">
        #{cloudId,jdbcType=VARCHAR},
      </if>
      <if test="uuid != null">
        #{uuid,jdbcType=VARCHAR},
      </if>
      <if test="createdAt != null">
        #{createdAt,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedAt != null">
        #{updatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="deletedAt != null">
        #{deletedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="internalId != null">
        #{internalId,jdbcType=INTEGER},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="projectId != null">
        #{projectId,jdbcType=VARCHAR},
      </if>
      <if test="imageRef != null">
        #{imageRef,jdbcType=VARCHAR},
      </if>
      <if test="kernelId != null">
        #{kernelId,jdbcType=VARCHAR},
      </if>
      <if test="ramdiskId != null">
        #{ramdiskId,jdbcType=VARCHAR},
      </if>
      <if test="launchIndex != null">
        #{launchIndex,jdbcType=INTEGER},
      </if>
      <if test="keyName != null">
        #{keyName,jdbcType=VARCHAR},
      </if>
      <if test="keyData != null">
        #{keyData,jdbcType=VARCHAR},
      </if>
      <if test="powerState != null">
        #{powerState,jdbcType=INTEGER},
      </if>
      <if test="vmState != null">
        #{vmState,jdbcType=VARCHAR},
      </if>
      <if test="memoryMb != null">
        #{memoryMb,jdbcType=INTEGER},
      </if>
      <if test="vcpus != null">
        #{vcpus,jdbcType=INTEGER},
      </if>
      <if test="hostname != null">
        #{hostname,jdbcType=VARCHAR},
      </if>
      <if test="host != null">
        #{host,jdbcType=VARCHAR},
      </if>
      <if test="userData != null">
        #{userData,jdbcType=VARCHAR},
      </if>
      <if test="reservationId != null">
        #{reservationId,jdbcType=VARCHAR},
      </if>
      <if test="launchedAt != null">
        #{launchedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="terminatedAt != null">
        #{terminatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="displayName != null">
        #{displayName,jdbcType=VARCHAR},
      </if>
      <if test="displayDescription != null">
        #{displayDescription,jdbcType=VARCHAR},
      </if>
      <if test="availabilityZone != null">
        #{availabilityZone,jdbcType=VARCHAR},
      </if>
      <if test="locked != null">
        #{locked,jdbcType=SMALLINT},
      </if>
      <if test="osType != null">
        #{osType,jdbcType=VARCHAR},
      </if>
      <if test="launchedOn != null">
        #{launchedOn,jdbcType=VARCHAR},
      </if>
      <if test="instanceTypeId != null">
        #{instanceTypeId,jdbcType=VARCHAR},
      </if>
      <if test="vmMode != null">
        #{vmMode,jdbcType=VARCHAR},
      </if>
      <if test="architecture != null">
        #{architecture,jdbcType=VARCHAR},
      </if>
      <if test="rootDeviceName != null">
        #{rootDeviceName,jdbcType=VARCHAR},
      </if>
      <if test="accessIpV4 != null">
        #{accessIpV4,jdbcType=VARCHAR},
      </if>
      <if test="accessIpV6 != null">
        #{accessIpV6,jdbcType=VARCHAR},
      </if>
      <if test="configDrive != null">
        #{configDrive,jdbcType=VARCHAR},
      </if>
      <if test="taskState != null">
        #{taskState,jdbcType=VARCHAR},
      </if>
      <if test="defaultEphemeralDevice != null">
        #{defaultEphemeralDevice,jdbcType=VARCHAR},
      </if>
      <if test="defaultSwapDevice != null">
        #{defaultSwapDevice,jdbcType=VARCHAR},
      </if>
      <if test="progress != null">
        #{progress,jdbcType=INTEGER},
      </if>
      <if test="autoDiskConfig != null">
        #{autoDiskConfig,jdbcType=SMALLINT},
      </if>
      <if test="shutdownTerminate != null">
        #{shutdownTerminate,jdbcType=SMALLINT},
      </if>
      <if test="disableTerminate != null">
        #{disableTerminate,jdbcType=SMALLINT},
      </if>
      <if test="rootGb != null">
        #{rootGb,jdbcType=INTEGER},
      </if>
      <if test="ephemeralGb != null">
        #{ephemeralGb,jdbcType=INTEGER},
      </if>
      <if test="cellName != null">
        #{cellName,jdbcType=VARCHAR},
      </if>
      <if test="node != null">
        #{node,jdbcType=VARCHAR},
      </if>
      <if test="deleted != null">
        #{deleted,jdbcType=INTEGER},
      </if>
      <if test="lockedBy != null">
        #{lockedBy,jdbcType=VARCHAR},
      </if>
      <if test="cleand != null">
        #{cleand,jdbcType=INTEGER},
      </if>
      <if test="ephemeralKeyUuid != null">
        #{ephemeralKeyUuid,jdbcType=VARCHAR},
      </if>
      <if test="hidden != null">
        #{hidden,jdbcType=SMALLINT},
      </if>
      <if test="eeStatus != null">
        #{eeStatus,jdbcType=INTEGER},
      </if>
      <if test="eeBp != null">
        #{eeBp,jdbcType=VARCHAR},
      </if>
      <if test="eeUser != null">
        #{eeUser,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="networkInfo != null">
        #{networkInfo,jdbcType=VARCHAR},
      </if>
      <if test="chargeType != null">
        #{chargeType,jdbcType=INTEGER},
      </if>
      <if test="priceUnit != null">
        #{priceUnit,jdbcType=INTEGER},
      </if>
      <if test="period != null">
        #{period,jdbcType=INTEGER},
      </if>
      <if test="expireTime != null">
        #{expireTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstancesExample" resultType="java.lang.Long">
    select count(*) from tbl_cmp_os_instances
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    update tbl_cmp_os_instances
    <set>
      <if test="record.cloudId != null">
        cloud_id = #{record.cloudId,jdbcType=VARCHAR},
      </if>
      <if test="record.uuid != null">
        uuid = #{record.uuid,jdbcType=VARCHAR},
      </if>
      <if test="record.createdAt != null">
        created_at = #{record.createdAt,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updatedAt != null">
        updated_at = #{record.updatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="record.deletedAt != null">
        deleted_at = #{record.deletedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="record.id != null">
        id = #{record.id,jdbcType=INTEGER},
      </if>
      <if test="record.internalId != null">
        internal_id = #{record.internalId,jdbcType=INTEGER},
      </if>
      <if test="record.userId != null">
        user_id = #{record.userId,jdbcType=VARCHAR},
      </if>
      <if test="record.projectId != null">
        project_id = #{record.projectId,jdbcType=VARCHAR},
      </if>
      <if test="record.imageRef != null">
        image_ref = #{record.imageRef,jdbcType=VARCHAR},
      </if>
      <if test="record.kernelId != null">
        kernel_id = #{record.kernelId,jdbcType=VARCHAR},
      </if>
      <if test="record.ramdiskId != null">
        ramdisk_id = #{record.ramdiskId,jdbcType=VARCHAR},
      </if>
      <if test="record.launchIndex != null">
        launch_index = #{record.launchIndex,jdbcType=INTEGER},
      </if>
      <if test="record.keyName != null">
        key_name = #{record.keyName,jdbcType=VARCHAR},
      </if>
      <if test="record.keyData != null">
        key_data = #{record.keyData,jdbcType=VARCHAR},
      </if>
      <if test="record.powerState != null">
        power_state = #{record.powerState,jdbcType=INTEGER},
      </if>
      <if test="record.vmState != null">
        vm_state = #{record.vmState,jdbcType=VARCHAR},
      </if>
      <if test="record.memoryMb != null">
        memory_mb = #{record.memoryMb,jdbcType=INTEGER},
      </if>
      <if test="record.vcpus != null">
        vcpus = #{record.vcpus,jdbcType=INTEGER},
      </if>
      <if test="record.hostname != null">
        hostname = #{record.hostname,jdbcType=VARCHAR},
      </if>
      <if test="record.host != null">
        host = #{record.host,jdbcType=VARCHAR},
      </if>
      <if test="record.userData != null">
        user_data = #{record.userData,jdbcType=VARCHAR},
      </if>
      <if test="record.reservationId != null">
        reservation_id = #{record.reservationId,jdbcType=VARCHAR},
      </if>
      <if test="record.launchedAt != null">
        launched_at = #{record.launchedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="record.terminatedAt != null">
        terminated_at = #{record.terminatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="record.displayName != null">
        display_name = #{record.displayName,jdbcType=VARCHAR},
      </if>
      <if test="record.displayDescription != null">
        display_description = #{record.displayDescription,jdbcType=VARCHAR},
      </if>
      <if test="record.availabilityZone != null">
        availability_zone = #{record.availabilityZone,jdbcType=VARCHAR},
      </if>
      <if test="record.locked != null">
        locked = #{record.locked,jdbcType=SMALLINT},
      </if>
      <if test="record.osType != null">
        os_type = #{record.osType,jdbcType=VARCHAR},
      </if>
      <if test="record.launchedOn != null">
        launched_on = #{record.launchedOn,jdbcType=VARCHAR},
      </if>
      <if test="record.instanceTypeId != null">
        instance_type_id = #{record.instanceTypeId,jdbcType=VARCHAR},
      </if>
      <if test="record.vmMode != null">
        vm_mode = #{record.vmMode,jdbcType=VARCHAR},
      </if>
      <if test="record.architecture != null">
        architecture = #{record.architecture,jdbcType=VARCHAR},
      </if>
      <if test="record.rootDeviceName != null">
        root_device_name = #{record.rootDeviceName,jdbcType=VARCHAR},
      </if>
      <if test="record.accessIpV4 != null">
        access_ip_v4 = #{record.accessIpV4,jdbcType=VARCHAR},
      </if>
      <if test="record.accessIpV6 != null">
        access_ip_v6 = #{record.accessIpV6,jdbcType=VARCHAR},
      </if>
      <if test="record.configDrive != null">
        config_drive = #{record.configDrive,jdbcType=VARCHAR},
      </if>
      <if test="record.taskState != null">
        task_state = #{record.taskState,jdbcType=VARCHAR},
      </if>
      <if test="record.defaultEphemeralDevice != null">
        default_ephemeral_device = #{record.defaultEphemeralDevice,jdbcType=VARCHAR},
      </if>
      <if test="record.defaultSwapDevice != null">
        default_swap_device = #{record.defaultSwapDevice,jdbcType=VARCHAR},
      </if>
      <if test="record.progress != null">
        progress = #{record.progress,jdbcType=INTEGER},
      </if>
      <if test="record.autoDiskConfig != null">
        auto_disk_config = #{record.autoDiskConfig,jdbcType=SMALLINT},
      </if>
      <if test="record.shutdownTerminate != null">
        shutdown_terminate = #{record.shutdownTerminate,jdbcType=SMALLINT},
      </if>
      <if test="record.disableTerminate != null">
        disable_terminate = #{record.disableTerminate,jdbcType=SMALLINT},
      </if>
      <if test="record.rootGb != null">
        root_gb = #{record.rootGb,jdbcType=INTEGER},
      </if>
      <if test="record.ephemeralGb != null">
        ephemeral_gb = #{record.ephemeralGb,jdbcType=INTEGER},
      </if>
      <if test="record.cellName != null">
        cell_name = #{record.cellName,jdbcType=VARCHAR},
      </if>
      <if test="record.node != null">
        node = #{record.node,jdbcType=VARCHAR},
      </if>
      <if test="record.deleted != null">
        deleted = #{record.deleted,jdbcType=INTEGER},
      </if>
      <if test="record.lockedBy != null">
        locked_by = #{record.lockedBy,jdbcType=VARCHAR},
      </if>
      <if test="record.cleand != null">
        cleand = #{record.cleand,jdbcType=INTEGER},
      </if>
      <if test="record.ephemeralKeyUuid != null">
        ephemeral_key_uuid = #{record.ephemeralKeyUuid,jdbcType=VARCHAR},
      </if>
      <if test="record.hidden != null">
        hidden = #{record.hidden,jdbcType=SMALLINT},
      </if>
      <if test="record.eeStatus != null">
        ee_status = #{record.eeStatus,jdbcType=INTEGER},
      </if>
      <if test="record.eeBp != null">
        ee_bp = #{record.eeBp,jdbcType=VARCHAR},
      </if>
      <if test="record.eeUser != null">
        ee_user = #{record.eeUser,jdbcType=VARCHAR},
      </if>
      <if test="record.status != null">
        status = #{record.status,jdbcType=VARCHAR},
      </if>
      <if test="record.networkInfo != null">
        network_info = #{record.networkInfo,jdbcType=VARCHAR},
      </if>
      <if test="record.chargeType != null">
        charge_type = #{record.chargeType,jdbcType=INTEGER},
      </if>
      <if test="record.priceUnit != null">
        price_unit = #{record.priceUnit,jdbcType=INTEGER},
      </if>
      <if test="record.period != null">
        period = #{record.period,jdbcType=INTEGER},
      </if>
      <if test="record.expireTime != null">
        expire_time = #{record.expireTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    update tbl_cmp_os_instances
    set cloud_id = #{record.cloudId,jdbcType=VARCHAR},
      uuid = #{record.uuid,jdbcType=VARCHAR},
      created_at = #{record.createdAt,jdbcType=TIMESTAMP},
      updated_at = #{record.updatedAt,jdbcType=TIMESTAMP},
      deleted_at = #{record.deletedAt,jdbcType=TIMESTAMP},
      id = #{record.id,jdbcType=INTEGER},
      internal_id = #{record.internalId,jdbcType=INTEGER},
      user_id = #{record.userId,jdbcType=VARCHAR},
      project_id = #{record.projectId,jdbcType=VARCHAR},
      image_ref = #{record.imageRef,jdbcType=VARCHAR},
      kernel_id = #{record.kernelId,jdbcType=VARCHAR},
      ramdisk_id = #{record.ramdiskId,jdbcType=VARCHAR},
      launch_index = #{record.launchIndex,jdbcType=INTEGER},
      key_name = #{record.keyName,jdbcType=VARCHAR},
      key_data = #{record.keyData,jdbcType=VARCHAR},
      power_state = #{record.powerState,jdbcType=INTEGER},
      vm_state = #{record.vmState,jdbcType=VARCHAR},
      memory_mb = #{record.memoryMb,jdbcType=INTEGER},
      vcpus = #{record.vcpus,jdbcType=INTEGER},
      hostname = #{record.hostname,jdbcType=VARCHAR},
      host = #{record.host,jdbcType=VARCHAR},
      user_data = #{record.userData,jdbcType=VARCHAR},
      reservation_id = #{record.reservationId,jdbcType=VARCHAR},
      launched_at = #{record.launchedAt,jdbcType=TIMESTAMP},
      terminated_at = #{record.terminatedAt,jdbcType=TIMESTAMP},
      display_name = #{record.displayName,jdbcType=VARCHAR},
      display_description = #{record.displayDescription,jdbcType=VARCHAR},
      availability_zone = #{record.availabilityZone,jdbcType=VARCHAR},
      locked = #{record.locked,jdbcType=SMALLINT},
      os_type = #{record.osType,jdbcType=VARCHAR},
      launched_on = #{record.launchedOn,jdbcType=VARCHAR},
      instance_type_id = #{record.instanceTypeId,jdbcType=VARCHAR},
      vm_mode = #{record.vmMode,jdbcType=VARCHAR},
      architecture = #{record.architecture,jdbcType=VARCHAR},
      root_device_name = #{record.rootDeviceName,jdbcType=VARCHAR},
      access_ip_v4 = #{record.accessIpV4,jdbcType=VARCHAR},
      access_ip_v6 = #{record.accessIpV6,jdbcType=VARCHAR},
      config_drive = #{record.configDrive,jdbcType=VARCHAR},
      task_state = #{record.taskState,jdbcType=VARCHAR},
      default_ephemeral_device = #{record.defaultEphemeralDevice,jdbcType=VARCHAR},
      default_swap_device = #{record.defaultSwapDevice,jdbcType=VARCHAR},
      progress = #{record.progress,jdbcType=INTEGER},
      auto_disk_config = #{record.autoDiskConfig,jdbcType=SMALLINT},
      shutdown_terminate = #{record.shutdownTerminate,jdbcType=SMALLINT},
      disable_terminate = #{record.disableTerminate,jdbcType=SMALLINT},
      root_gb = #{record.rootGb,jdbcType=INTEGER},
      ephemeral_gb = #{record.ephemeralGb,jdbcType=INTEGER},
      cell_name = #{record.cellName,jdbcType=VARCHAR},
      node = #{record.node,jdbcType=VARCHAR},
      deleted = #{record.deleted,jdbcType=INTEGER},
      locked_by = #{record.lockedBy,jdbcType=VARCHAR},
      cleand = #{record.cleand,jdbcType=INTEGER},
      ephemeral_key_uuid = #{record.ephemeralKeyUuid,jdbcType=VARCHAR},
      hidden = #{record.hidden,jdbcType=SMALLINT},
      ee_status = #{record.eeStatus,jdbcType=INTEGER},
      ee_bp = #{record.eeBp,jdbcType=VARCHAR},
      ee_user = #{record.eeUser,jdbcType=VARCHAR},
      status = #{record.status,jdbcType=VARCHAR},
      network_info = #{record.networkInfo,jdbcType=VARCHAR},
      charge_type = #{record.chargeType,jdbcType=INTEGER},
      price_unit = #{record.priceUnit,jdbcType=INTEGER},
      period = #{record.period,jdbcType=INTEGER},
      expire_time = #{record.expireTime,jdbcType=TIMESTAMP}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstances">
    update tbl_cmp_os_instances
    <set>
      <if test="createdAt != null">
        created_at = #{createdAt,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedAt != null">
        updated_at = #{updatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="deletedAt != null">
        deleted_at = #{deletedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="id != null">
        id = #{id,jdbcType=INTEGER},
      </if>
      <if test="internalId != null">
        internal_id = #{internalId,jdbcType=INTEGER},
      </if>
      <if test="userId != null">
        user_id = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="projectId != null">
        project_id = #{projectId,jdbcType=VARCHAR},
      </if>
      <if test="imageRef != null">
        image_ref = #{imageRef,jdbcType=VARCHAR},
      </if>
      <if test="kernelId != null">
        kernel_id = #{kernelId,jdbcType=VARCHAR},
      </if>
      <if test="ramdiskId != null">
        ramdisk_id = #{ramdiskId,jdbcType=VARCHAR},
      </if>
      <if test="launchIndex != null">
        launch_index = #{launchIndex,jdbcType=INTEGER},
      </if>
      <if test="keyName != null">
        key_name = #{keyName,jdbcType=VARCHAR},
      </if>
      <if test="keyData != null">
        key_data = #{keyData,jdbcType=VARCHAR},
      </if>
      <if test="powerState != null">
        power_state = #{powerState,jdbcType=INTEGER},
      </if>
      <if test="vmState != null">
        vm_state = #{vmState,jdbcType=VARCHAR},
      </if>
      <if test="memoryMb != null">
        memory_mb = #{memoryMb,jdbcType=INTEGER},
      </if>
      <if test="vcpus != null">
        vcpus = #{vcpus,jdbcType=INTEGER},
      </if>
      <if test="hostname != null">
        hostname = #{hostname,jdbcType=VARCHAR},
      </if>
      <if test="host != null">
        host = #{host,jdbcType=VARCHAR},
      </if>
      <if test="userData != null">
        user_data = #{userData,jdbcType=VARCHAR},
      </if>
      <if test="reservationId != null">
        reservation_id = #{reservationId,jdbcType=VARCHAR},
      </if>
      <if test="launchedAt != null">
        launched_at = #{launchedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="terminatedAt != null">
        terminated_at = #{terminatedAt,jdbcType=TIMESTAMP},
      </if>
      <if test="displayName != null">
        display_name = #{displayName,jdbcType=VARCHAR},
      </if>
      <if test="displayDescription != null">
        display_description = #{displayDescription,jdbcType=VARCHAR},
      </if>
      <if test="availabilityZone != null">
        availability_zone = #{availabilityZone,jdbcType=VARCHAR},
      </if>
      <if test="locked != null">
        locked = #{locked,jdbcType=SMALLINT},
      </if>
      <if test="osType != null">
        os_type = #{osType,jdbcType=VARCHAR},
      </if>
      <if test="launchedOn != null">
        launched_on = #{launchedOn,jdbcType=VARCHAR},
      </if>
      <if test="instanceTypeId != null">
        instance_type_id = #{instanceTypeId,jdbcType=VARCHAR},
      </if>
      <if test="vmMode != null">
        vm_mode = #{vmMode,jdbcType=VARCHAR},
      </if>
      <if test="architecture != null">
        architecture = #{architecture,jdbcType=VARCHAR},
      </if>
      <if test="rootDeviceName != null">
        root_device_name = #{rootDeviceName,jdbcType=VARCHAR},
      </if>
      <if test="accessIpV4 != null">
        access_ip_v4 = #{accessIpV4,jdbcType=VARCHAR},
      </if>
      <if test="accessIpV6 != null">
        access_ip_v6 = #{accessIpV6,jdbcType=VARCHAR},
      </if>
      <if test="configDrive != null">
        config_drive = #{configDrive,jdbcType=VARCHAR},
      </if>
      <if test="taskState != null">
        task_state = #{taskState,jdbcType=VARCHAR},
      </if>
      <if test="defaultEphemeralDevice != null">
        default_ephemeral_device = #{defaultEphemeralDevice,jdbcType=VARCHAR},
      </if>
      <if test="defaultSwapDevice != null">
        default_swap_device = #{defaultSwapDevice,jdbcType=VARCHAR},
      </if>
      <if test="progress != null">
        progress = #{progress,jdbcType=INTEGER},
      </if>
      <if test="autoDiskConfig != null">
        auto_disk_config = #{autoDiskConfig,jdbcType=SMALLINT},
      </if>
      <if test="shutdownTerminate != null">
        shutdown_terminate = #{shutdownTerminate,jdbcType=SMALLINT},
      </if>
      <if test="disableTerminate != null">
        disable_terminate = #{disableTerminate,jdbcType=SMALLINT},
      </if>
      <if test="rootGb != null">
        root_gb = #{rootGb,jdbcType=INTEGER},
      </if>
      <if test="ephemeralGb != null">
        ephemeral_gb = #{ephemeralGb,jdbcType=INTEGER},
      </if>
      <if test="cellName != null">
        cell_name = #{cellName,jdbcType=VARCHAR},
      </if>
      <if test="node != null">
        node = #{node,jdbcType=VARCHAR},
      </if>
      <if test="deleted != null">
        deleted = #{deleted,jdbcType=INTEGER},
      </if>
      <if test="lockedBy != null">
        locked_by = #{lockedBy,jdbcType=VARCHAR},
      </if>
      <if test="cleand != null">
        cleand = #{cleand,jdbcType=INTEGER},
      </if>
      <if test="ephemeralKeyUuid != null">
        ephemeral_key_uuid = #{ephemeralKeyUuid,jdbcType=VARCHAR},
      </if>
      <if test="hidden != null">
        hidden = #{hidden,jdbcType=SMALLINT},
      </if>
      <if test="eeStatus != null">
        ee_status = #{eeStatus,jdbcType=INTEGER},
      </if>
      <if test="eeBp != null">
        ee_bp = #{eeBp,jdbcType=VARCHAR},
      </if>
      <if test="eeUser != null">
        ee_user = #{eeUser,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="networkInfo != null">
        network_info = #{networkInfo,jdbcType=VARCHAR},
      </if>
      <if test="chargeType != null">
        charge_type = #{chargeType,jdbcType=INTEGER},
      </if>
      <if test="priceUnit != null">
        price_unit = #{priceUnit,jdbcType=INTEGER},
      </if>
      <if test="period != null">
        period = #{period,jdbcType=INTEGER},
      </if>
      <if test="expireTime != null">
        expire_time = #{expireTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where cloud_id = #{cloudId,jdbcType=VARCHAR}
      and uuid = #{uuid,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.lnjoying.justice.cmp.db.model.TblCmpOsInstances">
    update tbl_cmp_os_instances
    set created_at = #{createdAt,jdbcType=TIMESTAMP},
      updated_at = #{updatedAt,jdbcType=TIMESTAMP},
      deleted_at = #{deletedAt,jdbcType=TIMESTAMP},
      id = #{id,jdbcType=INTEGER},
      internal_id = #{internalId,jdbcType=INTEGER},
      user_id = #{userId,jdbcType=VARCHAR},
      project_id = #{projectId,jdbcType=VARCHAR},
      image_ref = #{imageRef,jdbcType=VARCHAR},
      kernel_id = #{kernelId,jdbcType=VARCHAR},
      ramdisk_id = #{ramdiskId,jdbcType=VARCHAR},
      launch_index = #{launchIndex,jdbcType=INTEGER},
      key_name = #{keyName,jdbcType=VARCHAR},
      key_data = #{keyData,jdbcType=VARCHAR},
      power_state = #{powerState,jdbcType=INTEGER},
      vm_state = #{vmState,jdbcType=VARCHAR},
      memory_mb = #{memoryMb,jdbcType=INTEGER},
      vcpus = #{vcpus,jdbcType=INTEGER},
      hostname = #{hostname,jdbcType=VARCHAR},
      host = #{host,jdbcType=VARCHAR},
      user_data = #{userData,jdbcType=VARCHAR},
      reservation_id = #{reservationId,jdbcType=VARCHAR},
      launched_at = #{launchedAt,jdbcType=TIMESTAMP},
      terminated_at = #{terminatedAt,jdbcType=TIMESTAMP},
      display_name = #{displayName,jdbcType=VARCHAR},
      display_description = #{displayDescription,jdbcType=VARCHAR},
      availability_zone = #{availabilityZone,jdbcType=VARCHAR},
      locked = #{locked,jdbcType=SMALLINT},
      os_type = #{osType,jdbcType=VARCHAR},
      launched_on = #{launchedOn,jdbcType=VARCHAR},
      instance_type_id = #{instanceTypeId,jdbcType=VARCHAR},
      vm_mode = #{vmMode,jdbcType=VARCHAR},
      architecture = #{architecture,jdbcType=VARCHAR},
      root_device_name = #{rootDeviceName,jdbcType=VARCHAR},
      access_ip_v4 = #{accessIpV4,jdbcType=VARCHAR},
      access_ip_v6 = #{accessIpV6,jdbcType=VARCHAR},
      config_drive = #{configDrive,jdbcType=VARCHAR},
      task_state = #{taskState,jdbcType=VARCHAR},
      default_ephemeral_device = #{defaultEphemeralDevice,jdbcType=VARCHAR},
      default_swap_device = #{defaultSwapDevice,jdbcType=VARCHAR},
      progress = #{progress,jdbcType=INTEGER},
      auto_disk_config = #{autoDiskConfig,jdbcType=SMALLINT},
      shutdown_terminate = #{shutdownTerminate,jdbcType=SMALLINT},
      disable_terminate = #{disableTerminate,jdbcType=SMALLINT},
      root_gb = #{rootGb,jdbcType=INTEGER},
      ephemeral_gb = #{ephemeralGb,jdbcType=INTEGER},
      cell_name = #{cellName,jdbcType=VARCHAR},
      node = #{node,jdbcType=VARCHAR},
      deleted = #{deleted,jdbcType=INTEGER},
      locked_by = #{lockedBy,jdbcType=VARCHAR},
      cleand = #{cleand,jdbcType=INTEGER},
      ephemeral_key_uuid = #{ephemeralKeyUuid,jdbcType=VARCHAR},
      hidden = #{hidden,jdbcType=SMALLINT},
      ee_status = #{eeStatus,jdbcType=INTEGER},
      ee_bp = #{eeBp,jdbcType=VARCHAR},
      ee_user = #{eeUser,jdbcType=VARCHAR},
      status = #{status,jdbcType=VARCHAR},
      network_info = #{networkInfo,jdbcType=VARCHAR},
      charge_type = #{chargeType,jdbcType=INTEGER},
      price_unit = #{priceUnit,jdbcType=INTEGER},
      period = #{period,jdbcType=INTEGER},
      expire_time = #{expireTime,jdbcType=TIMESTAMP}
    where cloud_id = #{cloudId,jdbcType=VARCHAR}
      and uuid = #{uuid,jdbcType=VARCHAR}
  </update>

  <select id="getInstanceIds" resultType="String">
    select uuid from tbl_cmp_os_instances
    where cloud_id = #{cloudId} and ee_status != -1
  </select>

  <resultMap id="GetStatusMetricsRsp" type="com.lnjoying.justice.schema.entity.stat.StatusMetrics">
    <result column="vm_state" jdbcType="VARCHAR" property="statusStr" />
    <result column="count" jdbcType="INTEGER" property="count" />
  </resultMap>
  <select id="getVmInstanceStatusMetrics" resultMap="GetStatusMetricsRsp">
    SELECT vm_state, COUNT(*) as count
    FROM tbl_cmp_os_instances
    where ee_status != -1 and cloud_id = #{cloudId,jdbcType=VARCHAR}
    <if test="userId != null and userId != ''">
      and ee_user = #{userId,jdbcType=VARCHAR}
    </if>
    <if test="bpId != null and bpId != ''">
      and ee_bp = #{bpId,jdbcType=VARCHAR}
    </if>
    GROUP BY vm_state
  </select>
</mapper>